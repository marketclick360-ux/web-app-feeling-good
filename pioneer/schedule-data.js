// Weekly Meeting Schedule Data â€” Auto-generated from jw.org
// This file contains midweek and weekend meeting info that auto-updates based on current week
// All meeting content links back to jw.org for compliance

const MEETING_SCHEDULE = [
  {
    startDate: "2026-01-05",
    endDate: "2026-01-11",
    weekLabel: "January 5-11, 2026",
    theme: "Jehovah's Purpose Will Be Fulfilled",
    scripture: "\"Jehovah of armies has sworn: 'Just as I have intended, so it will be, and just as I have decided, that is what will come true.'\"\u2014Isaiah 14:24",
    treasuresTalk: "Jehovah's Purpose Cannot Be Thwarted",
    watchtowerArticle: "Maintain Your Joy in Old Age",
    watchtowerUrl: "https://www.jw.org/en/library/magazines/watchtower-study-november-2025/Maintain-Your-Joy-in-Old-Age/",
    workbookUrl: "https://www.jw.org/en/library/jw-meeting-workbook/january-february-2026-mwb/Life-and-Ministry-Meeting-Schedule-for-January-5-11-2026/",
    keyScriptures: [
      { ref: "Ps. 92:12-14", book: "psalms", chapter: 92 },
      { ref: "Isa. 40:29-31", book: "isaiah", chapter: 40 },
      { ref: "Ps. 37:25", book: "psalms", chapter: 37 },
      { ref: "Job 33:25", book: "job", chapter: 33 },
      { ref: "Isa. 33:24", book: "isaiah", chapter: 33 },
      { ref: "Phil. 4:6, 7", book: "philippians", chapter: 4 }
    ]
  },
  {
    startDate: "2026-01-12",
    endDate: "2026-01-18",
    weekLabel: "January 12-18, 2026",
    theme: "Stay Watchful and Alert",
    scripture: "\"Watchman, what about the night? Watchman, what about the night?\"\u2014Isaiah 21:11",
    treasuresTalk: "Be a Watchman in These Last Days",
    watchtowerArticle: "Maintain Your Joy as a Caregiver",
    watchtowerUrl: "https://www.jw.org/en/library/magazines/watchtower-study-november-2025/Maintain-Your-Joy-as-a-Caregiver/",
    workbookUrl: "https://www.jw.org/en/library/jw-meeting-workbook/january-february-2026-mwb/Life-and-Ministry-Meeting-Schedule-for-January-12-18-2026/",
    keyScriptures: [
      { ref: "Gal. 6:2", book: "galatians", chapter: 6 },
      { ref: "Isa. 40:29", book: "isaiah", chapter: 40 },
      { ref: "1 Pet. 5:7", book: "1-peter", chapter: 5 },
      { ref: "Prov. 17:22", book: "proverbs", chapter: 17 },
      { ref: "Phil. 4:13", book: "philippians", chapter: 4 }
    ]
  },
  {
    startDate: "2026-01-19",
    endDate: "2026-01-25",
    weekLabel: "January 19-25, 2026",
    theme: "Look! This Is Our God!",
    scripture: "\"In that day one will say: 'Look! This is our God! We have hoped in him, and he will save us.'\"\u2014Isaiah 25:9",
    treasuresTalk: "Look! This Is Our God!",
    watchtowerArticle: "Consider Our Sympathetic High Priest\u2014Jesus",
    watchtowerUrl: "https://www.jw.org/en/library/magazines/watchtower-study-november-2025/Consider-Our-Sympathetic-High-Priest-Jesus/",
    workbookUrl: "https://www.jw.org/en/library/jw-meeting-workbook/january-february-2026-mwb/Life-and-Ministry-Meeting-Schedule-for-January-19-25-2026/",
    keyScriptures: [
      { ref: "Heb. 4:15, 16", book: "hebrews", chapter: 4 },
      { ref: "Heb. 2:17, 18", book: "hebrews", chapter: 2 },
      { ref: "Isa. 53:4, 5", book: "isaiah", chapter: 53 },
      { ref: "1 John 2:1, 2", book: "1-john", chapter: 2 },
      { ref: "Matt. 11:28-30", book: "matthew", chapter: 11 }
    ]
  },
  {
    startDate: "2026-01-26",
    endDate: "2026-02-01",
    weekLabel: "January 26\u2013February 1, 2026",
    theme: "Jehovah Will Help His People",
    scripture: "\"Trust in Jehovah forever, for Jah Jehovah is the eternal Rock.\"\u2014Isaiah 26:4",
    treasuresTalk: "Trust in Jehovah Forever",
    watchtowerArticle: "\"You Are Someone Very Precious\"!",
    watchtowerUrl: "https://www.jw.org/en/library/magazines/watchtower-study-november-2025/You-Are-Someone-Very-Precious/",
    workbookUrl: "https://www.jw.org/en/library/jw-meeting-workbook/january-february-2026-mwb/Life-and-Ministry-Meeting-Schedule-for-January-26-February-1-2026/",
    keyScriptures: [
      { ref: "Ps. 139:1-4", book: "psalms", chapter: 139 },
      { ref: "Isa. 43:4", book: "isaiah", chapter: 43 },
      { ref: "Matt. 10:29-31", book: "matthew", chapter: 10 },
      { ref: "Jer. 31:3", book: "jeremiah", chapter: 31 },
      { ref: "1 John 3:19, 20", book: "1-john", chapter: 3 }
    ]
  },
  {
    startDate: "2026-02-02",
    endDate: "2026-02-08",
    weekLabel: "February 2-8, 2026",
    theme: "The Result of True Righteousness Will Be Peace",
    scripture: "\"The result of true righteousness will be peace, and the fruitage of true righteousness will be lasting tranquility and security.\"\u2014Isaiah 32:17",
    treasuresTalk: "Find Refuge Under Jehovah's Wings",
    watchtowerArticle: "The Book of Job Can Help You When You Suffer",
    watchtowerUrl: "https://www.jw.org/en/library/magazines/watchtower-study-december-2025/The-Book-of-Job-Can-Help-You-When-You-Suffer/",
    workbookUrl: "https://www.jw.org/en/library/jw-meeting-workbook/january-february-2026-mwb/Life-and-Ministry-Meeting-Schedule-for-February-2-8-2026/",
    keyScriptures: [
      { ref: "Job 1:21, 22", book: "job", chapter: 1 },
      { ref: "Job 2:9, 10", book: "job", chapter: 2 },
      { ref: "Jas. 5:11", book: "james", chapter: 5 },
      { ref: "Rom. 8:28", book: "romans", chapter: 8 },
      { ref: "Ps. 34:18, 19", book: "psalms", chapter: 34 }
    ]
  },
  {
    startDate: "2026-02-09",
    endDate: "2026-02-15",
    weekLabel: "February 9-15, 2026",
    theme: "He Is the Stability of Your Times",
    scripture: "\"He is the stability of your times, an abundance of salvation, wisdom, and knowledge.\"\u2014Isaiah 33:6",
    treasuresTalk: "\"He Is the Stability of Your Times\"",
    watchtowerArticle: "The Book of Job Can Help You When You Give Counsel",
    watchtowerUrl: "https://www.jw.org/en/library/magazines/watchtower-study-december-2025/The-Book-of-Job-Can-Help-You-When-You-Give-Counsel/",
    workbookUrl: "https://www.jw.org/en/library/jw-meeting-workbook/january-february-2026-mwb/Life-and-Ministry-Meeting-Schedule-for-February-9-15-2026/",
    keyScriptures: [
      { ref: "Job 4:7, 8", book: "job", chapter: 4 },
      { ref: "Job 8:5, 6", book: "job", chapter: 8 },
      { ref: "Job 42:7, 8", book: "job", chapter: 42 },
      { ref: "Prov. 12:18", book: "proverbs", chapter: 12 },
      { ref: "Col. 4:6", book: "colossians", chapter: 4 }
    ]
  },
  {
    startDate: "2026-02-16",
    endDate: "2026-02-22",
    weekLabel: "February 16-22, 2026",
    theme: "Jehovah Will Defend His People",
    scripture: "\"I will defend this city and save it for my own sake and for the sake of my servant David.\"\u2014Isaiah 37:35",
    treasuresTalk: "Jehovah Will Defend His People",
    watchtowerArticle: "Imitate Jehovah's Humility",
    watchtowerUrl: "https://www.jw.org/en/library/magazines/watchtower-study-december-2025/Imitate-Jehovahs-Humility/",
    workbookUrl: "https://www.jw.org/en/library/jw-meeting-workbook/january-february-2026-mwb/Life-and-Ministry-Meeting-Schedule-for-February-16-22-2026/",
    keyScriptures: [
      { ref: "Phil. 2:3, 4", book: "philippians", chapter: 2 },
      { ref: "Mic. 6:8", book: "micah", chapter: 6 },
      { ref: "Isa. 57:15", book: "isaiah", chapter: 57 },
      { ref: "Ps. 138:6", book: "psalms", chapter: 138 },
      { ref: "1 Pet. 5:5, 6", book: "1-peter", chapter: 5 }
    ]
  },
  {
    startDate: "2026-02-23",
    endDate: "2026-03-01",
    weekLabel: "February 23\u2013March 1, 2026",
    theme: "Those Hoping in Jehovah Will Regain Power",
    scripture: "\"Those hoping in Jehovah will regain power. They will soar on wings like eagles.\"\u2014Isaiah 40:31",
    treasuresTalk: "Those Hoping in Jehovah Will Regain Power",
    watchtowerArticle: "How to Plan a Wedding That Brings Honor to Jehovah",
    watchtowerUrl: "https://www.jw.org/en/library/magazines/watchtower-study-december-2025/How-to-Plan-a-Wedding-That-Brings-Honor-to-Jehovah/",
    workbookUrl: "https://www.jw.org/en/library/jw-meeting-workbook/january-february-2026-mwb/Life-and-Ministry-Meeting-Schedule-for-February-23-March-1-2026/",
    keyScriptures: [
      { ref: "Gen. 2:22-24", book: "genesis", chapter: 2 },
      { ref: "Matt. 19:5, 6", book: "matthew", chapter: 19 },
      { ref: "Eph. 5:28-33", book: "ephesians", chapter: 5 },
      { ref: "Prov. 18:22", book: "proverbs", chapter: 18 },
      { ref: "Heb. 13:4", book: "hebrews", chapter: 13 }
    ]
  }
];

// Helper: create a jw.org compliance link (HTML anchor tag)
function jwLink(url, text) {
  return '<a href="' + url + '" target="_blank" rel="noopener noreferrer" style="color:inherit;text-decoration:underline;">' + text + '</a>';
}

// Helper: build a jw.org scripture URL
function scriptureUrl(book, chapter) {
  return 'https://www.jw.org/en/library/bible/study-bible/books/' + book + '/' + chapter + '/';
}

// Function to get the current week's schedule
function getCurrentWeekSchedule() {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  for (const week of MEETING_SCHEDULE) {
    const start = new Date(week.startDate);
    const end = new Date(week.endDate);
    end.setHours(23, 59, 59, 999);
    if (today >= start && today <= end) {
      return week;
    }
  }
  const futureWeeks = MEETING_SCHEDULE.filter(w => new Date(w.startDate) > today);
  if (futureWeeks.length > 0) {
    return futureWeeks[0];
  }
  return MEETING_SCHEDULE[MEETING_SCHEDULE.length - 1];
}

// Function to render the schedule on the page
// All jw.org-sourced content is linked back to the original source for compliance
function renderCurrentSchedule() {
  const schedule = getCurrentWeekSchedule();
  const wbUrl = schedule.workbookUrl;
  const wtUrl = schedule.watchtowerUrl;

  // === HEADER SECTION ===

  const weekInfo = document.querySelector('.week-info');
  if (weekInfo) {
    weekInfo.innerHTML = jwLink(wbUrl, 'Week of ' + schedule.weekLabel);
  }

  const themeElement = document.querySelector('.meeting-theme');
  if (themeElement) {
    themeElement.innerHTML = 'Midweek Meeting Theme: ' + jwLink(wbUrl, '<strong>"' + schedule.theme + '"</strong>');
  }

  const scriptureVerse = document.querySelector('.scripture-verse');
  if (scriptureVerse) {
    scriptureVerse.innerHTML = jwLink(wbUrl, schedule.scripture);
  }

  // === MEETING PREP SECTION ===

  var meetingDiv = document.getElementById('meeting');
  if (meetingDiv) {
    var meetingH2 = meetingDiv.querySelector('h2');
    if (meetingH2) {
      meetingH2.innerHTML = '\ud83d\udcdd ' + jwLink(wbUrl, 'Meeting Preparation \u2014 Week of ' + schedule.weekLabel);
    }

    var meetingContent = meetingDiv.querySelector('.meeting-content');
    if (meetingContent) {
      var paragraphs = meetingContent.querySelectorAll('p');
      if (paragraphs.length >= 1) {
        paragraphs[0].innerHTML = '<strong>Main Theme:</strong> ' + jwLink(wbUrl, '"' + schedule.treasuresTalk + '" / "' + schedule.theme + '"');
      }
    }

    var h3s = meetingDiv.querySelectorAll('h3');
    h3s.forEach(function(h3) {
      if (h3.textContent.includes('Treasures From')) {
        h3.innerHTML = jwLink(wbUrl, "Treasures From God's Word (10 min)");
      }
      if (h3.textContent.includes('Spiritual Gems')) {
        h3.innerHTML = jwLink(wbUrl, 'Spiritual Gems (10 min)');
      }
      if (h3.textContent.includes('Apply Yourself')) {
        h3.innerHTML = jwLink(wbUrl, 'Apply Yourself to the Field Ministry');
      }
      if (h3.textContent.includes('Congregation Bible Study')) {
        h3.innerHTML = jwLink(wbUrl, 'Congregation Bible Study (30 min)');
      }
    });

    var wtArticleEl = meetingDiv.querySelector('.wt-article-title');
    if (wtArticleEl && schedule.watchtowerArticle) {
      wtArticleEl.innerHTML = jwLink(wtUrl, schedule.watchtowerArticle);
    }

    // === KEY SCRIPTURES FOR WATCHTOWER STUDY ===
    var keyScripturesEl = meetingDiv.querySelector('.key-scriptures-list');
    if (keyScripturesEl && schedule.keyScriptures && schedule.keyScriptures.length > 0) {
      var html = '<strong>Key Scriptures:</strong><ul style="margin:8px 0;padding-left:20px;">';
      schedule.keyScriptures.forEach(function(s) {
        var url = scriptureUrl(s.book, s.chapter);
        html += '<li style="margin:4px 0;">' + jwLink(url, s.ref) + '</li>';
      });
      html += '</ul>';
      keyScripturesEl.innerHTML = html;
    }
  }

  // === STANDALONE ELEMENTS ===

  var treasuresEl = document.querySelector('.treasures-link');
  if (treasuresEl) {
    treasuresEl.innerHTML = jwLink(wbUrl, 'Treasures Talk: "' + schedule.treasuresTalk + '"');
  }

  var workbookLink = document.querySelector('.workbook-link');
  if (workbookLink) {
    workbookLink.href = wbUrl;
  }

  var wtStandalone = document.querySelector('.wt-article-title');
  if (wtStandalone && schedule.watchtowerArticle) {
    wtStandalone.innerHTML = jwLink(wtUrl, schedule.watchtowerArticle);
  }

  console.log('Schedule loaded for:', schedule.weekLabel);
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', renderCurrentSchedule);
